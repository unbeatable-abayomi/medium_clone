import React,{useState, useRef,useEffect,useEffect} from 'react';
import { Link } from 'react-router-dom';
import axios from 'axios';
const Authentication =()=>{
    const [email, setEmail]  = useState('');
    const [password, setPassword]  = useState('');
    const [isSubmitting, setIsSubmitting]  = useState(false);
    const [{isLoading,response,error}, doFetch] = useFetch("https://conduit.productionready.io/api/users/login");
    //const emailRef = useRef(null);
//   {
//       isLoading : true/false,
//       response : null | {},
//       error : null | {}
//   }
  const handleSubmit = (event)=>{
        event.preventDefault();

        doFetch({
           method : 'post',
           body:{
               user :{
                   email: "qq@qq.com",

                   


                   
                   password : '123'
               }
           } 
        })
        //setIsSubmitting(true);
        //console.log('values', email,password);
  }
//  useEffect(()=>{
//      if(!isSubmitting){
//          return
//      }
//      console.log('use effect is trigger');
//      axios("https://conduit.productionready.io/api/users/login",{
//          method: 'post',
//          body:{
//              user:{
//                  email:'qq@qq.com',
//                  password:'123'
//              }
//          }
//      })
//      .then(
//          res =>{
//              console.log('res',res);
//              setIsSubmitting(false);
//          }
//      )
//      .catch(
//         error =>{
//             console.log('error now',error);
//             setIsSubmitting(false);
//         }
//     )
//  });
    return (
        <div className='auth-page'>
            <div className='container-page'>
                <div className='row'>
                    <div className='col-md-6 offset-md-3 col-xs-12'>
                      
<h1 className='text-xs-center'> Sign In </h1>
<p className='text-xs-center'>
    <Link to='/register'>Need An Account?</Link>

</p>
<form onSubmit={handleSubmit}>
    <fieldset>
    <fieldset className='form-group'>
<input type='email' className='form-control form-control-lag' placeholder='email' value={email} onChange={e => setEmail(e.target.value)}/>
{/* <input type='email' className='form-control form-control-lag' placeholder='email' ref={emailRef}/> */}
    </fieldset>
    <fieldset className='form-group'>
<input type='password' className='form-control form-control-lag' placeholder='password' value={password} onChange={e => setPassword(e.target.value)}/>
    </fieldset>
    <button disabled={isSubmitting} className='btn btn-lg btn-primary pull-xs-right' type='submit'>
            Sign in
    </button>
    </fieldset>
    
</form>
                    </div>
                </div>
            </div>
        </div>
    )
}

export default Authentication